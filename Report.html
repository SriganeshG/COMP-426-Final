 <!DOCTYPE html>
<html lang= "en">


<head>
    <title>  Ticket Filter </title>

      <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/heroic-features.css" rel="stylesheet">


<link rel = "stylesheet" type= "text/css" href ="style_report.css">
<script src="http://maps.googleapis.com/maps/api/js?sensor=true"></script>
<script src="https://maps.google.com/maps/api/js?sensor=false"></script>
    <script>
var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    var latlon = position.coords.latitude + "," + position.coords.longitude;

    var img_url = "https://maps.googleapis.com/maps/api/staticmap?center="
    +latlon+"&zoom=14&size=400x300&sensor=false";
    document.getElementById("mapholder").innerHTML = "<img src='"+img_url+"'>";
    document.getElementById("latlong").innerHTML = "<input type='hidden' name='latlongInput' value='"+latlon+"'>";
}


</script>
</head>
<body>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

    <script>
      function fillBuildingTypes() {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
      if(this.readyState == 4 && this.status ==200) {
      var jsonObj = $.parseJSON(this.responseText);
      var innerText = "<option value='0'>All</option>";
      jQuery.each(jsonObj, function(index, value) {
      innerText += "<option value='";
                                   innerText += index;
                                   innerText += "'>";
        innerText += value;
        innerText += "</option>";
      });
      document.getElementById("buildingType").innerHTML = innerText;
      fillBuildings();
		}
	};
	xhttp.open("GET", "getLocationType.php", true);
	xhttp.send();
}
      $(document).ready(fillBuildingTypes())
      function fillBuildings(){
      var x = document.getElementById("buildingType").value;

      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
      if(this.readyState == 4 && this.status == 200) {
      var jsonObj = $.parseJSON(this.responseText);
      var innerText = "<option value='0'>Choose a Building...</option>";
      jQuery.each(jsonObj, function(index, value) {
      innerText += "<option value='";
                                    innerText += index;
                                    innerText += "'>";
        innerText += value;
        innerText += "</option>";
      });
      document.getElementById("buildingName").innerHTML = innerText;
      }};
      xhttp.open("GET", "getLocationType.php/"+x, true);
      xhttp.send();
      }
    </script>

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
      <div class="container">
        <a class="navbar-brand" href="index.html">Ticket Submission Service</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item active">
              <a class="nav-link" href="index.html">Home
                <span class="sr-only">(current)</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Report.html">Submit Tickets</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Review.html">Review Tickets</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="Contact.html">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="reportingColumn">

		<h1 id="typePaste"></h1>

        <h1 class="bgClip">Filter<br/>Service</h1>
        <h2>Issue Report:</h2>

        <ul class="bullets"style="list-style-type:none">
        <form action="submitReport.php" method="post" enctype="multipart/form-data">
          <li>
            Issue Type:<br>
                <select onchange="fillBuildings()" id="buildingType" name="buildingType" class="myButton">
                    <option value="">Issue Type</option>
                    <option value="Hardware">Hardware</option>
                    <option value="Software">Software</option>
                    <option value="Networking">Networking</option>
                   
                </select>
            </li>
            <br>
            <li>
                <select id="buildingName" name="buildingName" class="myButton">
                    <option value="">Building</option>
                    <option value="Building1">Building1</option>
                    <option value="Building2">Building2</option>
                    <option value="Building3">Building3</option>
                    <option value="Building4">Building4</option>
                 
                </select>
            </li>
            <br>
            <li>
                Room or Area:
                <br>
                <input type="text" name="Room" maxlength="255" class="myButton">
            </li>

            <li>
                <br>
                <textarea id="issuetextbox" name="issue" cols="50" rows="5" maxlength="1024" class="myButton">What is the problem and also the approximate location of the problem.</textarea>
            </li>
            <li>
                <div id="latlong"></div>

                <h3>Select image to upload for report:</h3>
                <input type="file" name="files[]" id="files" multiple="multiple" class="myButton" />
                <br>
                <br>
               

            </li>
            <br>
            <li>
               <input type="submit" value="Submit Report NOW!" class="myButton" name="submit"/>
            </li>
        </form>
        </ul>
        <div id="mapholder"></div>
        <div class="buttons">
            <p><b>What do you want to do now?</b></p>
            <ul class="buttonlist" style="list-style-type:none">
                <li><a href="index.html" class="myButton">Back to Main</a></li>
                <br>
                <li><a href="Review.html" class="myButton">Review Reports</a></li>
                <br>
                <li><a href="Contact.html" class="myButton">About Us</a></li>
            </ul>
        </div>
    </div>



</body>


</html>
